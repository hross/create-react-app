jobs:
 - job: Windows
   pool: 'Hosted VS2017'
   strategy:
     matrix:
       node_8_x:
          node_version: 8.x
       node_10_x:
         node_version: 10.x
   steps:
    - task: NodeTool@0
      inputs:
        versionSpec: $(node_version)
        displayName: 'Install Node.js'
        
    - bash: |
         curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --nightly
         export PATH="$HOME/.yarn/bin:$PATH"
        displayName: 'Install yarn'

    - bash: |
         if [ $TEST_SUITE = "simple" ]; then tasks/e2e-simple.sh; fi
         if [ $TEST_SUITE = "installs" ]; then tasks/e2e-installs.sh; fi
         if [ $TEST_SUITE = "kitchensink" ]; then tasks/e2e-kitchensink.sh; fi
         if [ $TEST_SUITE = "kitchensink-eject" ]; then tasks/e2e-kitchensink-eject.sh; fi
         if [ $TEST_SUITE = "old-node" ]; then tasks/e2e-old-node.sh; fi
         if [ $TEST_SUITE = "behavior" ]; then tasks/e2e-behavior.sh; fi
        env: { TEST_SUITE:  $(test_suite) }
        displayName: 'install and build'
